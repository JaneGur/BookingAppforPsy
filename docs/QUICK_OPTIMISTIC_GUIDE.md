# ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç: Optimistic Updates

## –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å?

–¢–µ–ø–µ—Ä—å **–í–°–ï –¥–µ–π—Å—Ç–≤–∏—è –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ**! –ë–æ–ª—å—à–µ –Ω–∏–∫–∞–∫–∏—Ö –∑–∞–¥–µ—Ä–∂–µ–∫ –∏ –æ–∂–∏–¥–∞–Ω–∏–π.

## –ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è?

### –î–æ ‚è≥
```
–ö–ª–∏–∫ –Ω–∞ "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –æ–ø–ª–∞—Ç—É" ‚Üí 
‚è≥ –ñ–¥–µ–º... ‚Üí 
‚è≥ –ñ–¥–µ–º... ‚Üí 
‚úÖ –°—Ç–∞—Ç—É—Å –æ–±–Ω–æ–≤–∏–ª—Å—è (2-3 —Å–µ–∫—É–Ω–¥—ã)
```

### –ü–æ—Å–ª–µ ‚ö°
```
–ö–ª–∏–∫ –Ω–∞ "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –æ–ø–ª–∞—Ç—É" ‚Üí 
‚úÖ –°—Ç–∞—Ç—É—Å –æ–±–Ω–æ–≤–∏–ª—Å—è –ú–ì–ù–û–í–ï–ù–ù–û! (0 —Å–µ–∫—É–Ω–¥)
```

## –ì–¥–µ —Ä–∞–±–æ—Ç–∞–µ—Ç?

### ‚úÖ –ó–∞–ø–∏—Å–∏
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ (pending ‚Üí confirmed ‚Üí completed)
- –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏
- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∑–∞–ø–∏—Å–∏

### ‚úÖ –ö–ª–∏–µ–Ω—Ç—ã
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (–∏–º—è, email, telegram)
- –£–¥–∞–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞
- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞

### ‚úÖ –ò—Å—Ç–æ—Ä–∏—è –∫–ª–∏–µ–Ω—Ç–∞
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–ø–∏—Å–µ–π –∫–ª–∏–µ–Ω—Ç–∞
- –û—Ç–º–µ—Ç–∫–∞ –æ–ø–ª–∞—Ç—ã

## –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?

### 1. –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–ø–∏—Å–∏

```typescript
import { useUpdateBookingStatus } from '@/lib/hooks'

const updateStatus = useUpdateBookingStatus()

// –í –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ
await updateStatus.mutateAsync({
    id: bookingId,
    status: 'confirmed'
})
// UI –æ–±–Ω–æ–≤–∏–ª—Å—è –ú–ì–ù–û–í–ï–ù–ù–û! ‚ö°
```

### 2. –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞

```typescript
import { useUpdateClient } from '@/lib/hooks'

const updateClient = useUpdateClient()

// –í –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ
await updateClient.mutateAsync({
    clientId: '123',
    data: { email: 'new@example.com' }
})
// Email –æ–±–Ω–æ–≤–∏–ª—Å—è –ú–ì–ù–û–í–ï–ù–ù–û! ‚ö°
```

### 3. –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏

```typescript
import { useDeleteBooking } from '@/lib/hooks'

const deleteBooking = useDeleteBooking()

// –í –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ
await deleteBooking.mutateAsync(bookingId)
// –ó–∞–ø–∏—Å—å –∏—Å—á–µ–∑–ª–∞ –ú–ì–ù–û–í–ï–ù–ù–û! ‚ö°
```

### 4. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏

```typescript
import { useCreateBooking } from '@/lib/hooks'

const createBooking = useCreateBooking()

// –í –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ
await createBooking.mutateAsync({
    client_name: '–ò–≤–∞–Ω',
    booking_date: '2026-02-15',
    // ...
})
// –ó–∞–ø–∏—Å—å –ø–æ—è–≤–∏–ª–∞—Å—å –ú–ì–ù–û–í–ï–ù–ù–û! ‚ö°
```

## –ß—Ç–æ –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫?

–ù–µ –ø–µ—Ä–µ–∂–∏–≤–∞–π—Ç–µ! –ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –≤–µ—Ä–Ω–µ—Ç –æ—à–∏–±–∫—É:
1. UI **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫–∞—Ç–∏—Ç—Å—è** –∫ —Å—Ç–∞—Ä–æ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏—é
2. –ü–æ–∫–∞–∂–µ—Ç—Å—è **toast-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ** –æ–± –æ—à–∏–±–∫–µ
3. –í—Å–µ –¥–∞–Ω–Ω—ã–µ –æ—Å—Ç–∞–Ω—É—Ç—Å—è **—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏**

## Toast-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

–¢–µ–ø–µ—Ä—å –ø—Ä–∏ –∫–∞–∂–¥–æ–º –¥–µ–π—Å—Ç–≤–∏–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –∫—Ä–∞—Å–∏–≤—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:

```typescript
‚úÖ "–°—Ç–∞—Ç—É—Å –∑–∞–ø–∏—Å–∏ –∏–∑–º–µ–Ω–µ–Ω"
‚úÖ "–î–∞–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω—ã"
‚úÖ "–ó–∞–ø–∏—Å—å —É–¥–∞–ª–µ–Ω–∞"
‚ùå "–ù–µ —É–¥–∞–ª–æ—Å—å –∏–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å"
```

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

–í—Å–µ —Ö—É–∫–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤:
- `lib/hooks/useBookings.ts` - –¥–ª—è –∑–∞–ø–∏—Å–µ–π
- `lib/hooks/useClients.ts` - –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤

–ü–æ–¥—Ä–æ–±–Ω–µ–µ: [OPTIMISTIC_UPDATES.md](./OPTIMISTIC_UPDATES.md)

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. **–°–∫–æ—Ä–æ—Å—Ç—å** ‚ö° - –¥–µ–π—Å—Ç–≤–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
2. **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** üõ°Ô∏è - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π rollback –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
3. **UX** üé® - –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∫–∞–∂–µ—Ç—Å—è –≤ 10x –±—ã—Å—Ç—Ä–µ–µ
4. **–ü—Ä–æ—Å—Ç–æ—Ç–∞** üë®‚Äçüíª - –æ–¥–∏–Ω —Ö—É–∫ –≤–º–µ—Å—Ç–æ fetch + setState

---

**–¢–µ–ø–µ—Ä—å –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç –º–æ–ª–Ω–∏–µ–Ω–æ—Å–Ω–æ!** ‚ö°
